ros2の通信方式変更（通常のfast_ddsより大きなデータに強い）
export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp


gazebo起動（go2モデル、mid360、ワールドあり）
ros2 launch go2_config gazebo.launch.py world:=/usr/share/gazebo-11/worlds/willowgarage.world

負荷軽減のためgazeboのguiを停止
pkill gzclient

gazeboの負荷確認 Factorの値が1に近いほど良い（0.7以上が理想）
gz stats


rvizをシミュレーション時間で起動
ros2 run rviz2 rviz2 --ros-args -p use_sim_time:=True


操作トピックを起動
ros2 run teleop_twist_keyboard teleop_twist_keyboard


2D変換を起動（/mid360/points  →　/scan）
ros2 run pointcloud_to_laserscan pointcloud_to_laserscan_node --ros-args \
-p target_frame:=base_link \
-p min_height:=0.1 \
-p max_height:=1.0 \
-p angle_min:=-3.1415 \
-p angle_max:=3.1415 \
-p angle_increment:=0.0087 \
-p scan_time:=0.1 \
-p range_min:=0.1 \
-p range_max:=30.0 \
-p use_inf:=true \
-p qos_reliability:=1 \
-p use_sim_time:=True \
-r cloud_in:=/mid360/points



真値tfの作成 
~/mid360-simulation/true_odom_publisher.py
起動 python3 true_odom_publisher.py


SLAM Toolboxの起動
ros2 run slam_toolbox async_slam_toolbox_node --ros-args \
-p use_sim_time:=True \
-p base_frame:=base_link \
-p odom_frame:=odom \
-p map_frame:=map \
-p scan_topic:=/scan \
-p mode:=mapping \
-p transform_timeout:=0.2 \
-p map_update_interval:=1.0 \
-p minimum_travel_distance:=0.1 \
-p minimum_travel_heading:=0.1 \
-p loop_search_space_smear:=0.5 \
-p loop_match_minimum_chain_size:=3 \
-p loop_match_maximum_variance_coarse:=0.5


mapの保存
ros2 run nav2_map_server map_saver_cli -f my_final_map



Navigation2
入力としてbase_footprintを欲しがるが今回はないためbase_linkとbase_footprintをつなぐ
ros2 run tf2_ros static_transform_publisher 0 0 0 0 0 0 base_link base_footprint



